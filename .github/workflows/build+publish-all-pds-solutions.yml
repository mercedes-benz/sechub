# SPDX-License-Identifier: MIT
name: Build and publish all SecHub PDS solutions

on:
  workflow_dispatch:
    inputs:
      pds-version:
        description: pds-base version to use (e.g. 1.0.0)
        required: true
  workflow_call:
    inputs:
      pds-version:
        required: true
        type: string

jobs:
  call_build-and-publish-pds-checkmarx:
    uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
    with:
      pds-solution: checkmarx
      pds-version: ${{ inputs.pds-version }}

  call_build-and-publish-pds-cloc:
    uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
    with:
      pds-solution: cloc
      pds-version: ${{ inputs.pds-version }}

  # 2023-06-12: findsecuritybugs deactivated due to upstream fix is not yet released
  # call_build-and-publish-pds-findsecuritybugs:
  #   uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
  #   with:
  #     pds-solution: findsecuritybugs
  #     pds-version: ${{ inputs.pds-version }}

  call_build-and-publish-pds-gitleaks:
    uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
    with:
      pds-solution: gitleaks
      pds-version: ${{ inputs.pds-version }}

  call_build-and-publish-pds-gosec:
    uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
    with:
      pds-solution: gosec
      pds-version: ${{ inputs.pds-version }}

  call_build-and-publish-pds-multi:
    uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
    with:
      pds-solution: multi
      pds-version: ${{ inputs.pds-version }}

  call_build-and-publish-pds-owasp-zap:
    uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
    with:
      pds-solution: owasp-zap
      pds-version: ${{ inputs.pds-version }}

  call_build-and-publish-pmd:
    uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
    with:
      pds-solution: pmd
      pds-version: ${{ inputs.pds-version }}

  call_build-and-publish-pds-scancode:
    uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
    with:
      pds-solution: scancode
      pds-version: ${{ inputs.pds-version }}

  call_build-and-publish-pds-tern:
    uses: mercedes-benz/sechub/.github/workflows/_build+publish-pds-solution.yml@feature-1936-build+push-pds-solutions
    with:
      pds-solution: tern
      pds-version: ${{ inputs.pds-version }}
